# 前端提测、代码管理、提交规范、自测规范

## 前端提测

### 分支创建：

**feature-s故事号-功能编号**

请以 `feature`+`-s`+`故事号`+`-任务号` 来创建分支，删除 `feature-工号` 这种分支，每次开发单个功能后，进行分支登基记录，可以在开发功能的猪齿鱼的每日工作记录中进行登记，或者在本地进行记录。一个功能一个分支，当前功能提测发正式后，删除功能分支。

**hotfix-任务编号**

`bug`修复分支，请以`hotfix + 任务编号`来创建分支，同样修改完`bug`提测测试通过后，删除此分支。

### 分支提测

**提测**

开发的分支代码合并到` test` 分支，例如 `feature-s111-111` 合并到` test`分支，或者部分修改在 `test` 中的，合并代码到 `test` 分支

**封版**

测试环境不允许再进行合并分支和推送代码，在封版前，需要将本地要发布生产的分支合并到 `test` 分支，之后会进行管控，在封板后合并分支会失败。

封板一般会在中午12点，12点之后不在进行代码推送。

**封版期**

在封版期，前端负责人修改基于现在模块的最新版本将版本号`+1`，然后修改`test`分支的版本。

在封版期，前端负责人将`test`代码合并到`release`分支，本地启动验证，验证后发布`npm`包，创建版本分支。

在封版期，测试团队基于最新发布的test环境进行测试，列出本次发版的问题，是否有重大`bug`，之前的哪些问题这次修复，哪些问题下次发版修复等。

**开放**

测试团队在测试后，生成本次测试发版文档后，前端封版期结束，可以继续进行提测和`bug`修复。

## 分支管理

**创建新分支**

基于`test`去创建新分支进行开发。

没有发布到生产对一些`bug`的修复，如果要创建分支，基于`test`分支创建。

**bug修复**

生产环境有`bug`修复，基于`release`创建`hotfix`分支进行`bug`修复，`hotfix`分支要分别合并到`release `、`test `、`develop` 分支。

如果是修复生产，需要紧急发包，请在修复同时修改版本号，将版本号`+1`，然后再将 `hotfix`分支 合并到各个分支。

## 提交规范

**模块名称**

例如：`srm-front-spfm` 或者 `srm-front-cux-grwl`

**提交信息**

- feat：新增或者修改
- fix： bug修复
- build：主要目的是修改项目构建系统(例如 glup，webpack，rollup 的配置等)的提交

- ci：主要目的是修改项目继续集成流程(例如 Travis，Jenkins，GitLab CI，Circle等)的提交

- docs：文档更新

- perf：性能优化

- refactor：重构代码(既没有新增功能，也没有修复 `bug`)

- style：不影响程序逻辑的代码修改(修改空白字符，补全缺失的分号等)

- test：新增测试用例或是更新现有测试

- revert：回滚某个更早之前的提交

- chore：不属于以上类型的其他类型

**特别提交**

1、feat

新增： `add`+`:`+ `空格`+`增加`+`功能名称`。例如 add: 增加子账户权限页面。

修改： `update`+`:`+`空格`+`修改`+`功能名称`+`修改内容描述`。例如：update: 修改子账户权限页面表格字段。

2、fix

格式：`fix`+`:`+`空格`+`修复内容`。例如: fix: 修复子账户管理页面调用接口接口参数传递错误的`bug`

## 自测规范

### 本地

1. 本地开发完成在推到`dev`前，要保证功能的完整性，不要开发了一半，页面都报错，就合并到`dev`环境。

2. 在推代码需要通过`eslint`检测工具，请不要强行通过检测。也不要一通不过`lint`就使用`lint`忽略。

3. 本地要测试相关lov是否可以显示数据，下拉列表是否拥有数据等。

### dev

`dev`环境需要开发人员确认如下几个点，在开发环境自测结束后，才可以通知测试人员进行测试，前端把控下质量，可以减少bug数量。

1. 菜单数据是否已经维护。
2. 页面是否可以打开，不报403。
3. 请求接口是否同步更新到`dev`，一定要确定调用接口是正常调用的。
4. 页面逻辑要自测，弹出框、按钮、导出、引入、显示隐藏等页面效果。
5. 数据逻辑要进行自测、增删改查以及其他业务逻辑要基本自测。
6. 要测试相关lov是否可以显示数据，下拉列表是否拥有数据等。
7. 二开模块，需要登录对应账号，然后查看`self`接口中`tenantNum`是否是二开的名称。
8. 二开模块，需要登录对应账号，查看二开功能是否可以正常访问以及使用。

### test

提测开放后，开发人员将代码推到远程仓库后，等待测试环境发布。

测试环境发布后前端人员要进行几点自测

1. 确认菜单在test环境中存在。
2. 确认测试环境中页面可以访问。
3. 页面一开始加载的一些基本逻辑无误。
4. 二开模块，需要登录相对应账号，然后查看`self`接口中`tenantNum`是否是二开的名称。
5. 二开模块，需要登录对应账号，查看二开功能是否可以正常访问以及使用。

### 





